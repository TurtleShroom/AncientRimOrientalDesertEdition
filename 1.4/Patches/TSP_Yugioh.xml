<?xml version="1.0" encoding="utf-8"?>

<Patch>
	<!-- Aelanna's Model No-Match Detector and Insertion Code -->
	<!-- Special thanks to Aelanna for straight-up saving me scores of headaches! -->
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[@Name="GE_Hat"]/recipeMaker/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[@Name="GE_Hat"]/recipeMaker</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="SAM_ObeliskBig"]/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[@Name="ObeliskSAM"]</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="SAM_ObeliskBig"]/comps</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[@Name="ObeliskSAM"]</xpath>
			<success>Always</success>
			<value>
				<comps></comps>
			</value>
		</nomatch>
	</Operation>
	
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="SAM_ObeliskBig"]/canGenerateDefaultDesignator</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/ThingDef[@Name="ObeliskSAM"]/canGenerateDefaultDesignator</xpath>
      <value>
		<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
      </value>
    </match>
	<!-- If it DOES NOT, add this instead. -->
	<nomatch Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>/Defs/ThingDef[@Name="ObeliskSAM"]</xpath>
		<value>
			<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
		</value>
	</nomatch>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]/comps</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]</xpath>
			<success>Always</success>
			<value>
				<comps></comps>
			</value>
		</nomatch>
	</Operation>
	
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]/canGenerateDefaultDesignator</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]/canGenerateDefaultDesignator</xpath>
      <value>
		<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
      </value>
    </match>
	<!-- If it DOES NOT, add this instead. -->
	<nomatch Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]</xpath>
		<value>
			<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
		</value>
	</nomatch>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]/researchPrerequisites</xpath>
			<value>
				<li>AR_Project_Oriental_Culture</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>

	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GE_Hat_Seto"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[@Name="GE_Hat"]/recipeMaker/researchPrerequisites</xpath>
			<value>
				<li>AR_Project_Oriental_Culture</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="GS_Sarcophagus"]/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="GS_Sarcophagus"]</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GS_Sarcophagus"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GS_Sarcophagus"]/researchPrerequisites</xpath>
			<value>
				<li>AR_Project_Oriental_Culture</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GS_Sarcophagus"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GS_Sarcophagus"]</xpath>
			<value>
				<dominantStyleCategory MayRequire="Sarg.AlphaMemes">AM_Kemetic</dominantStyleCategory>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GS_Sarcophagus"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GS_Sarcophagus"]/statBases</xpath>
			<value>
				<StyleDominance MayRequire="Ludeon.RimWorld.Ideology">35</StyleDominance>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="GS_Sarcophagus"]/canGenerateDefaultDesignator</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/ThingDef[defName="GS_Sarcophagus"]/canGenerateDefaultDesignator</xpath>
      <value>
		<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
      </value>
    </match>
	<!-- If it DOES NOT, add this instead. -->
	<nomatch Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>/Defs/ThingDef[defName="GS_Sarcophagus"]</xpath>
		<value>
			<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
		</value>
	</nomatch>
    <!-- If the first XPATH does not exist, the original code stands. -->
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]/researchPrerequisites</xpath>
			<value>
				<li>AR_Project_Oriental_Culture</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
  
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]</xpath>
			<value>
				<dominantStyleCategory MayRequire="Sarg.AlphaMemes">AM_Kemetic</dominantStyleCategory>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]/statBases</xpath>
			<value>
				<StyleDominance MayRequire="Ludeon.RimWorld.Ideology">35</StyleDominance>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
  
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]/canGenerateDefaultDesignator</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]/canGenerateDefaultDesignator</xpath>
      <value>
		<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
      </value>
    </match>
	<!-- If it DOES NOT, add this instead. -->
	<nomatch Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>/Defs/ThingDef[defName="GSE_ObeliskBig"]</xpath>
		<value>
			<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
		</value>
	</nomatch>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="GS_SarcGSE_ObeliskBigophagus"]/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="GS_SarcGSE_ObeliskBigophagus"]</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GS_SarcGSE_ObeliskBigophagus"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GS_SarcGSE_ObeliskBigophagus"]/researchPrerequisites</xpath>
			<value>
				<li>AR_Project_Oriental_Culture</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
  
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GS_SarcGSE_ObeliskBigophagus"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GS_SarcGSE_ObeliskBigophagus"]</xpath>
			<value>
				<dominantStyleCategory MayRequire="Sarg.AlphaMemes">AM_Kemetic</dominantStyleCategory>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GS_SarcGSE_ObeliskBigophagus"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GS_SarcGSE_ObeliskBigophagus"]/statBases</xpath>
			<value>
				<StyleDominance MayRequire="Ludeon.RimWorld.Ideology">35</StyleDominance>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
  
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="GS_SarcGSE_ObeliskBigophagus"]/canGenerateDefaultDesignator</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/ThingDef[defName="GS_SarcGSE_ObeliskBigophagus"]/canGenerateDefaultDesignator</xpath>
      <value>
		<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
      </value>
    </match>
	<!-- If it DOES NOT, add this instead. -->
	<nomatch Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>/Defs/ThingDef[defName="GS_SarcGSE_ObeliskBigophagus"]</xpath>
		<value>
			<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
		</value>
	</nomatch>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="GSE_Monolith"]/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="GSE_Monolith"]</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GSE_Monolith"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GSE_Monolith"]/researchPrerequisites</xpath>
			<value>
				<li>AR_Project_Oriental_Culture</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
  
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GSE_Monolith"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GSE_Monolith"]</xpath>
			<value>
				<dominantStyleCategory MayRequire="Sarg.AlphaMemes">AM_Kemetic</dominantStyleCategory>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GSE_Monolith"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GSE_Monolith"]/statBases</xpath>
			<value>
				<StyleDominance MayRequire="Ludeon.RimWorld.Ideology">50</StyleDominance>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
  
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="GSE_Monolith"]/canGenerateDefaultDesignator</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/ThingDef[defName="GSE_Monolith"]/canGenerateDefaultDesignator</xpath>
      <value>
		<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
      </value>
    </match>
	<!-- If it DOES NOT, add this instead. -->
	<nomatch Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>/Defs/ThingDef[defName="GSE_Monolith"]</xpath>
		<value>
			<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
		</value>
	</nomatch>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  

	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="GSE_MonolithB"]/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="GSE_MonolithB"]</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GSE_MonolithB"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GSE_MonolithB"]/researchPrerequisites</xpath>
			<value>
				<li>AR_Project_Oriental_Culture</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>

	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GSE_MonolithB"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GSE_MonolithB"]</xpath>
			<value>
				<dominantStyleCategory MayRequire="Sarg.AlphaMemes">AM_Kemetic</dominantStyleCategory>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GSE_MonolithB"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GSE_MonolithB"]/statBases</xpath>
			<value>
				<StyleDominance MayRequire="Ludeon.RimWorld.Ideology">100</StyleDominance>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
  
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="GSE_MonolithB"]/canGenerateDefaultDesignator</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/ThingDef[defName="GSE_MonolithB"]/canGenerateDefaultDesignator</xpath>
      <value>
		<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
      </value>
    </match>
	<!-- If it DOES NOT, add this instead. -->
	<nomatch Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>/Defs/ThingDef[defName="GSE_MonolithB"]</xpath>
		<value>
			<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
		</value>
	</nomatch>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  

	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="GSE_MonolithC"]/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="GSE_MonolithC"]</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GSE_MonolithC"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GSE_MonolithC"]/researchPrerequisites</xpath>
			<value>
				<li>AR_Project_Oriental_Culture</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
  
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GSE_MonolithC"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GSE_MonolithC"]</xpath>
			<value>
				<dominantStyleCategory MayRequire="Sarg.AlphaMemes">AM_Kemetic</dominantStyleCategory>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GSE_MonolithC"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GSE_MonolithC"]/statBases</xpath>
			<value>
				<StyleDominance MayRequire="Ludeon.RimWorld.Ideology">50</StyleDominance>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
  
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="GSE_MonolithC"]/canGenerateDefaultDesignator</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/ThingDef[defName="GSE_MonolithC"]/canGenerateDefaultDesignator</xpath>
      <value>
		<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
      </value>
    </match>
	<!-- If it DOES NOT, add this instead. -->
	<nomatch Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>/Defs/ThingDef[defName="GSE_MonolithC"]</xpath>
		<value>
			<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
		</value>
	</nomatch>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>

	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="GS_SarcophagusB"]/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="GS_SarcophagusB"]</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GS_SarcophagusB"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GS_SarcophagusB"]/researchPrerequisites</xpath>
			<value>
				<li>AR_Project_Oriental_Culture</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
  
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GS_SarcophagusB"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GS_SarcophagusB"]</xpath>
			<value>
				<dominantStyleCategory MayRequire="Sarg.AlphaMemes">AM_Kemetic</dominantStyleCategory>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GS_SarcophagusB"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GS_SarcophagusB"]/statBases</xpath>
			<value>
				<StyleDominance MayRequire="Ludeon.RimWorld.Ideology">30</StyleDominance>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
  
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="GS_SarcophagusB"]/canGenerateDefaultDesignator</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/ThingDef[defName="GS_SarcophagusB"]/canGenerateDefaultDesignator</xpath>
      <value>
		<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
      </value>
    </match>
	
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="GS_HieroglyphicWall"]/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="GS_HieroglyphicWall"]</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GS_HieroglyphicWall"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GS_HieroglyphicWall"]/researchPrerequisites</xpath>
			<value>
				<li>AR_Project_Oriental_Culture</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>

	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GS_HieroglyphicWall"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GS_HieroglyphicWall"]</xpath>
			<value>
				<dominantStyleCategory MayRequire="Sarg.AlphaMemes">AM_Kemetic</dominantStyleCategory>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="GS_HieroglyphicWall"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="GS_HieroglyphicWall"]/statBases</xpath>
			<value>
				<StyleDominance MayRequire="Ludeon.RimWorld.Ideology">30</StyleDominance>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
  
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="GS_HieroglyphicWall"]/canGenerateDefaultDesignator</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/ThingDef[defName="GS_HieroglyphicWall"]/canGenerateDefaultDesignator</xpath>
      <value>
		<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
      </value>
    </match>
	<!-- If it DOES NOT, add this instead. -->
	<nomatch Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>/Defs/ThingDef[defName="GS_HieroglyphicWall"]</xpath>
		<value>
			<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
		</value>
	</nomatch>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[@Name="ObeliskSAM"]/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[@Name="ObeliskSAM"]</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="ObeliskSAM"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="ObeliskSAM"]/researchPrerequisites</xpath>
			<value>
				<li>AR_Project_Oriental_Culture</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
  
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="SAM_ObeliskBig"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[@Name="ObeliskSAM"]</xpath>
			<value>
				<dominantStyleCategory MayRequire="Sarg.AlphaMemes">AM_Kemetic</dominantStyleCategory>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="SAM_ObeliskBig"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[@Name="ObeliskSAM"]/statBases</xpath>
			<value>
				<StyleDominance MayRequire="Ludeon.RimWorld.Ideology">30</StyleDominance>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
  
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[@Name="ObeliskSAM"]/canGenerateDefaultDesignator</xpath>
    <!-- If it does, do this replacement. -->
    <match Class="PatchOperationReplace">
      <success>Always</success>
      <xpath>/Defs/ThingDef[@Name="ObeliskSAM"]/canGenerateDefaultDesignator</xpath>
      <value>
		<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
      </value>
    </match>
	<!-- If it DOES NOT, add this instead. -->
	<nomatch Class="PatchOperationAdd">
		<success>Always</success>
		<xpath>/Defs/ThingDef[@Name="ObeliskSAM"]</xpath>
		<value>
			<canGenerateDefaultDesignator>true</canGenerateDefaultDesignator>
		</value>
	</nomatch>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
  
  

	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientSword"]/recipeMaker/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientSword"]/recipeMaker</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientSword"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientSword"]/recipeMaker/researchPrerequisites</xpath>
			<value>
				<li>AR_Project_Oriental_Culture</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientSword"]/weaponTags</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientSword"]</xpath>
			<success>Always</success>
			<value>
				<weaponTags></weaponTags>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientSword"]/thingCategories</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientSword"]</xpath>
			<success>Always</success>
			<value>
				<thingCategories Inherit="False"></thingCategories>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientSword"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientSword"]/weaponTags</xpath>
			<value>
				<li>EgyptianNoble</li>
				<li>EgyptianHeavy</li>
				<li>HarrowedMeleeChampion</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientSword"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientSword"]/thingCategories</xpath>
			<value>
				<li>TSP_AR_RomanMelee</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_Staff_Egypt"]/recipeMaker/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_Staff_Egypt"]/recipeMaker</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_Staff_Egypt"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_Staff_Egypt"]/recipeMaker/researchPrerequisites</xpath>
			<value>
				<li>AR_Project_Oriental_Culture</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_Staff_Egypt"]/weaponTags</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_Staff_Egypt"]</xpath>
			<success>Always</success>
			<value>
				<weaponTags></weaponTags>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_Staff_Egypt"]/thingCategories</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_Staff_Egypt"]</xpath>
			<success>Always</success>
			<value>
				<thingCategories Inherit="False"></thingCategories>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_Staff_Egypt"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_Staff_Egypt"]/thingCategories</xpath>
			<value>
				<li>TSP_AR_RomanMelee</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_Staff_Egypt"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_Staff_Egypt"]/weaponTags</xpath>
			<value>
				<li>EgyptianRoyal</li>
				<!-- <li>HarrowedMeleeChampion</li> -->
				<li>HarrowedMeleeCommander</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientAXE"]/recipeMaker/researchPrerequisites</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientAXE"]/recipeMaker</xpath>
			<success>Always</success>
			<value>
				<researchPrerequisites></researchPrerequisites>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientAXE"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientAXE"]/recipeMaker/researchPrerequisites</xpath>
			<value>
				<li>AR_Project_Oriental_Culture</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientAXE"]/weaponTags</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientAXE"]</xpath>
			<success>Always</success>
			<value>
				<weaponTags></weaponTags>
			</value>
		</nomatch>
	</Operation>
	
	<!-- Add comps field to Settlement WorldObjectDef if it doesn't exist -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientAXE"]/thingCategories</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientAXE"]</xpath>
			<success>Always</success>
			<value>
				<thingCategories Inherit="False"></thingCategories>
			</value>
		</nomatch>
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientAXE"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientAXE"]/thingCategories</xpath>
			<value>
				<li>TSP_AR_RomanMelee</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>
	
	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
		<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientAXE"]</xpath>
		<!-- If it does, add this. -->
		<match Class="PatchOperationAdd">
			<success>Always</success>
			<xpath>/Defs/ThingDef[defName="MeleeWeapon_AncientAXE"]/weaponTags</xpath>
			<value>
				<li>EgyptianNoble</li>
				<li>EgyptianHeavy</li>
				<li>HarrowedMeleeChampion</li>
			</value>
		</match>
		<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>	
</Patch>